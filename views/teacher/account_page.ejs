<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("../component/metadata.html") %>
    <title>Account info</title>

</head>

<body onload="pageLoadingTop()">

  <%- include("../component/user-header-nav.html") %>
    <%- include("../component/teacher-offcanvas-nav.html") %>

      <div class="row mt-5 mbx p-2 shadowx">

        <div id="penboxform" data-bs-backdrop="static" class="row   p-2 ">

          <div class="   shadowx  mt-3 p-2 bg-light col-md-10 mb-5 col-12 m-auto">


            <form id="avatarform" action="#" method="post">
              <div class='pt-2 pb-2 bg-card-color-light d-flex justify-content-center'>
                <div>
                  <span class="avatar-append">
                    <img style="width: 150px; height: 150px" class="avatar-circle bg-card-color shadowx"
                      src="/image/teacher/resized/<%=info[0].avatar%>" alt="">

                  </span>
                  <label title="Change profile" class="btn btn-link"> <i class="bi bi-pen fs-5"></i>
                    <input required type="file" name='image' class="avatar-file" style="display: none;">
                    <input type="hidden" name='dataid' value="<%=info[0].ID%>">
                  </label>
                </div>

              </div>

              <div class=" d-flex align-items-center justify-content-center">
                <button class="btn btn-link me-5">Update photo</button>
              </div>
            </form>

            <form id="penboxdata" class="penboxdata" method="post" action="#" onsubmit="return false">
              <div class=" card shadowx">


                <div class="p-2 fw-500">
                  <p class="fs-5">Personal information</p>
                </div>

                <div class="card-body fw-semibold">

                  <div class="d-flex  m-2">
                    <input disabled required type="hidden" name="dataid" value='<%=info[0].ID%>'>
                    <div class="p-1 w-25">Position</div>
                    <code class='pe-1'>*</code>
                    <input class="form-dev w-75 p-1" required type="text" value="<%=info[0].position%>"
                      placeholder="Assistent Teacher" name="position" id="">
                  </div>

                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Name </div>
                    <code class='pe-1'>*</code>
                    <input class="form-dev w-75 p-1" required type="text" value="<%=info[0].name%>"
                      placeholder="enter name" name="name" id="">
                  </div>


                  <div class="d-flex p-2 justify-content-between align-items-center">
                    <p class="w-25  m-auto">Gender </p>
                    <code class='pe-1'>*</code> <span class="w-75">
                      Male <input value="Male" class="form-check-input shadowx ms-2 me-2" <%=info[0].gender=='Male'
                        ?'checked':null%> type="radio" name="gender" id="">
                      Female <input value="Female" class="form-check-input shadowx ms-2" <%=info[0].gender=='Female'
                        ?'checked':null%> type="radio" name="gender" id="">

                    </span>

                  </div>




                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Phone</div>
                    <code class='pe-1'>*</code>
                    <input required required class="form-dev w-75 p-1" type="phone" value="<%=info[0].phone%>"
                      placeholder="enter phone no" name="phone" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Index No </div>
                    <code class='pe-1'>*</code>
                    <input disabled required class="form-dev w-75 p-1" type="text" value="<%=info[0].index_number%>"
                      placeholder="enter index no" name="index_number" id="">
                  </div>

                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">PDSID No</div>
                    <code class='pe-1'>-</code>
                    <input disabled class="form-dev w-75 p-1" type="number" value="<%=info[0].pds_id%>"
                      placeholder="enter pdsid no" name="pds_id" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Birth date</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="date" value="<%=info[0].birth_date%>"
                      placeholder="enter date of birth" name="birth_date" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Blood group</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="text" value="<%=info[0].blood_group%>"
                      placeholder="AB+ve" name="blood_group" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Religion</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="text" value="<%=info[0].religion%>"
                      placeholder="enter religion" name="religion" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Address</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="text" value="<%=info[0].address%>"
                      placeholder="enter address" name="address" id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Joining date</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="date" value="<%=info[0].joining_date%>" name="joining_date"
                      id="">
                  </div>

                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Facebook link</div>
                    <code class='pe-1'>-</code>
                    <input class="form-dev w-75 p-1" type="text" value="<%=info[0].fb_link%>" name="fb_link" id="">
                  </div>


                  <div class="d-flex justify-content-end  m-2">

                    <input class="btn  text-primary submitbtn nav-fill btn-hover shadowx" type="submit"
                      value="Save and changes" id="">

                  </div>


                </div>
              </div>
            </form>
          </div>
        </div>






        <div id="emailaddress" data-bs-backdrop="static" class="row p-2 mt-5">

          <div class="shadowx  mt-3 bg-light col-md-10 mb-5 p-2 col-12 m-auto">

            <div class="p-2 fw-500">
              <p class="fs-5">Change my email address</p>
            </div>

            <form id="formemail" class="formemail" method="post" action="#" onsubmit="return false">
              <div class=" card shadowx">

                <div class="card-body fw-semibold">



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Email</div>
                    <code class='pe-1'>*</code>
                    <input required class="form-dev w-75 p-1" type="email"
                      placeholder="<%=info[0].email%>" name="username" id="">
                  </div>


                  <div class="d-flex justify-content-end  m-2">

                    <input class="btn  text-primary submitbtn nav-fill btn-hover shadowx" type="submit"
                      value="Send verify code" id="">

                  </div>


                </div>
              </div>
            </form>
          </div>
        </div>



        <div id="password" data-bs-backdrop="static" class="row p-2 mt-5">

          <div class="shadowx  mt-3 bg-light col-md-10 mb-5 p-2 col-12 m-auto">

            <div class="p-2 fw-500">
              <p class="fs-5">Change my password</p>
            </div>

            <form id="formpassword" class="formpassword" method="post" action="#" onsubmit="return false">
              <div class=" card shadowx">

                <div class="card-body fw-semibold">



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">Current password</div>
                    <code class='pe-1'>*</code>
                    <input required minlength="6" class="form-dev w-75 p-1" type="password" placeholder="********" name="cpassword"
                      id="">
                  </div>



                  <div class="d-flex  m-2">
                    <div class="p-1 w-25">New password</div>
                    <code class='pe-1'>*</code>
                    <input required minlength="6" class="form-dev w-75 p-1" type="password" placeholder="********" name="npassword"
                      id="">
                  </div>


                  <div class="d-flex justify-content-end  m-2">

                    <input class="btn  text-primary submitbtn nav-fill btn-hover shadowx" type="submit"
                      value="Update password" id="">

                  </div>


                </div>
              </div>
            </form>
          </div>
        </div>


        <!-- end mainDiv -->
      </div>


</body>

<script src="/app/___noviewport.js"></script>
<%-include("../component/___node.html") %>

  <script>
    noview.port({
      input_class: 'avatar-file',
      append_class: 'avatar-append',
      file_type: 'image',
      max_kb_size: 1024,
      multiple: false,


    })

    $('.avatar-file').on('change', () => {
      $('.avatar-append img').addClass('rounded-circle')
    })


    $('#avatarform').on('submit', (event) => {
      const formdata = new FormData($("#avatarform")[0])
      event.preventDefault();
      $.ajax({
        method: "post",
        url: "/teacher/self/img/post",
        data: formdata,
        dataType: "JSON",
        mimeType: 'multipart/form-data',
        cache: false,
        processData: false,
        contentType: false,
        beforeSend: function () {
          _spin_pull()
        },
        success: function (res) {
          _msg_pull(res.alert, res.msg)
          _spin_pop()

        }
      });
    })

    $(document).on('submit', '#penboxdata', (event) => {
      event.preventDefault();
      $.ajax({
        method: "post",
        url: "/teacher/self/penbox/push",
        data: $('#penboxdata').serialize(),
        dataType: "JSON",
        beforeSend: function(){
          $('.submitbtn').addClass('disabled');

        },
        success: function (res) {
          $('.submitbtn').removeClass('disabled');

          _msg_pull(res.alert, res.msg)
        }
      });

    })
    $(document).on('submit', '#formpassword', (event) => {
      event.preventDefault();
      $.ajax({
        method: "post",
        url: "/teacher/self/password/update/push",
        data: $('#formpassword').serialize(),
        dataType: "JSON",
        beforeSend: function(){
          $('.submitbtn').addClass('disabled');

        },
        success: function (res) {
          $('.submitbtn').removeClass('disabled');

          _msg_pull(res.alert, res.msg)
        }
      });

    }) 
    
    $(document).on('submit', '#formemail', (event) => {
      event.preventDefault();
      $.ajax({
        method: "post",
        url: "/teacher/self/email/update/pull",
        data: $('#formemail').serialize(),
        dataType: "JSON",
        beforeSend: function(){
          $('.submitbtn').addClass('disabled');
         _spin_pull()

        },
        success: function (res) {
          $('.submitbtn').removeClass('disabled');
          _spin_pop()
          if(res.feedback==true)  {
          _msg_pull(res.alert, res.msg);
         }
         

          else {
          mycard_content(res.htmldata);
          mycard_pull();
          }

        }
      });

    })    
    $(document).on('submit', '#formemailpush', (event) => {
      event.preventDefault();
      $.ajax({
        method: "post",
        url: "/teacher/self/email/update/push",
        data: $('#formemailpush').serialize(),
        dataType: "JSON",
        beforeSend: function(){
          $('.submitbtn').addClass('disabled');

        },
        success: function (res) {
          $('.submitbtn').removeClass('disabled');
          _msg_pull(res.alert, res.msg);
          if(res.status==true){
            mycard_pop();
          }
 
         

        }
      });

    })


  </script>

</html>